openapi: 3.0.1
info:
  title: Gathering API
  description: Gathering 서비스 REST API 문서 (REST Docs 기반)
  version: 1.0.0
servers:
  - url: http://localhost
tags: [ ]
paths:
  /login:
    post:
      tags:
        - login
      operationId: auth-login
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/login-733236850"
            examples:
              auth-login-fail-invalid-email:
                value: "{\"email\":\"invalid-email\",\"password\":\"\"}"
              auth-login-fail-user-not-found:
                value: "{\"email\":\"notfound@example.com\",\"password\":\"qARwtu22gWm4DtnttjuQbg==\"\
                  }"
              auth-login-fail-empty-password:
                value: "{\"email\":\"test@example.com\",\"password\":\"\"}"
              auth-login-fail-bad-credentials:
                value: "{\"email\":\"test@example.com\",\"password\":\"JM/lt9NkRjpaPL2HuukTEQ==\"\
                  }"
              auth-login:
                value: "{\"email\":\"test@example.com\",\"password\":\"qARwtu22gWm4DtnttjuQbg==\"\
                  }"
      responses:
        "400":
          description: "400"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/users-tsid-1331249008"
              examples:
                auth-login-fail-invalid-email:
                  value: "{\"code\":\"INVALID_EMAIL_FORMAT\",\"message\":\"올바른 형식의\
                    \ 이메일이 아닙니다.\"}"
                auth-login-fail-empty-password:
                  value: "{\"code\":\"INVALID_PASSWORD_FORMAT\",\"message\":\"비밀번호\
                    는 최소 8자 이상이며, 숫자와 특수문자(!@#$%^&*)를 포함해야 합니다.\"}"
        "401":
          description: "401"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/users-tsid-1331249008"
              examples:
                auth-login-fail-user-not-found:
                  value: "{\"code\":\"INVALID_CREDENTIALS\",\"message\":\"이메일 또는 비\
                    밀번호가 올바르지 않습니다\"}"
                auth-login-fail-bad-credentials:
                  value: "{\"code\":\"INVALID_CREDENTIALS\",\"message\":\"이메일 또는 비\
                    밀번호가 올바르지 않습니다\"}"
        "200":
          description: "200"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/login1168052559"
              examples:
                auth-login:
                  value: "{\"accessToken\":\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\
                    ,\"tokenType\":\"Bearer\",\"expiresIn\":3600}"
  /logout:
    post:
      tags:
        - logout
      operationId: auth-logout
      responses:
        "200":
          description: "200"
  /refresh:
    post:
      tags:
        - refresh
      operationId: auth-refresh
      responses:
        "401":
          description: "401"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/refresh388130491"
              examples:
                auth-refresh-fail-expired:
                  value: "{\"code\":\"REFRESH_TOKEN_EXPIRED\",\"message\":\"리프레시 토\
                    큰이 만료되었습니다. 다시 로그인해주세요\"}"
                auth-refresh-fail-revoked:
                  value: "{\"code\":\"REFRESH_TOKEN_REVOKED\",\"message\":\"리프레시 토\
                    큰이 취소되었습니다. 다시 로그인해주세요\"}"
                auth-refresh-fail-malformed:
                  value: "{\"code\":\"REFRESH_TOKEN_MALFORMED\",\"message\":\"리프레시\
                    \ 토큰 형식이 올바르지 않습니다\"}"
                auth-refresh-fail-missing-token:
                  value: "{\"code\":\"REFRESH_TOKEN_MISSING\",\"message\":\"리프레시 토\
                    큰이 필요합니다\"}"
        "200":
          description: "200"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/refresh-542310961"
              examples:
                auth-refresh:
                  value: "{\"accessToken\":\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.new-access-token\"\
                    ,\"tokenType\":\"Bearer\",\"expiresIn\":3600}"
  /users/join:
    post:
      tags:
        - users
      operationId: users-join
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/users-join-1381348445"
            examples:
              users-join:
                value: "{\"email\":\"test@example.com\",\"password\":\"qARwtu22gWm4DtnttjuQbg==\"\
                  ,\"nickname\":\"테스터\",\"name\":\"홍길동\",\"phoneNumber\":\"01012345678\"\
                  }"
      responses:
        "204":
          description: "204"
  /users/me:
    get:
      tags:
        - users
      operationId: users-me
      responses:
        "200":
          description: "200"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/users-me-656631050"
              examples:
                users-me:
                  value: "{\"tsid\":\"1234567890123\",\"email\":\"test@example.com\"\
                    ,\"nickname\":\"테스터\",\"name\":\"홍길동\",\"phoneNumber\":\"01012345678\"\
                    ,\"profileImageUrl\":\"https://example.com/profile.jpg\",\"status\"\
                    :\"ACTIVE\",\"createdAt\":\"2024-01-01T00:00:00Z\",\"hasPassword\"\
                    :true,\"connectedProviders\":[]}"
    delete:
      tags:
        - users
      operationId: DELETE /users/me - 회원 탈퇴
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/users-me192728359"
            examples:
              DELETE /users/me - 회원 탈퇴:
                value: "{\"password\":\"qARwtu22gWm4DtnttjuQbg==\"}"
      responses:
        "204":
          description: "204"
    patch:
      tags:
        - users
      operationId: users-update-me
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/users-me-458480484"
            examples:
              users-update-me:
                value: "{\"nickname\":\"새닉네임\",\"name\":\"새이름\",\"phoneNumber\":\"\
                  01087654321\"}"
      responses:
        "200":
          description: "200"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/users-me54274076"
              examples:
                users-update-me:
                  value: "{\"tsid\":\"1234567890123\",\"email\":\"test@example.com\"\
                    ,\"nickname\":\"새닉네임\",\"name\":\"새이름\",\"phoneNumber\":\"01087654321\"\
                    ,\"profileImageUrl\":\"https://example.com/profile.jpg\",\"status\"\
                    :\"ACTIVE\",\"createdAt\":\"2024-01-01T00:00:00Z\",\"hasPassword\"\
                    :true,\"connectedProviders\":[]}"
  /users/{tsid}:
    get:
      tags:
        - users
      operationId: users-get
      parameters:
        - name: tsid
          in: path
          description: ""
          required: true
          schema:
            type: string
      responses:
        "404":
          description: "404"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/users-tsid-1331249008"
              examples:
                users-get-deleted:
                  value: "{\"code\":\"USER_DELETED\",\"message\":\"삭제된 사용자입니다.\"}"
        "200":
          description: "200"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/users-tsid-370292314"
              examples:
                users-get:
                  value: "{\"nickname\":\"테스터\",\"name\":\"홍길동\",\"profileImageUrl\"\
                    :\"https://example.com/profile.jpg\"}"
  /users/me/password:
    put:
      tags:
        - users
      operationId: users-change-password
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/users-me-password443516385"
            examples:
              users-change-password-invalid-current:
                value: "{\"currentPassword\":\"JM/lt9NkRjpaPL2HuukTEQ==\",\"newPassword\"\
                  :\"/hpXZngC7EPoYqiex5YphA==\"}"
              users-change-password:
                value: "{\"currentPassword\":\"ss9Ge153gVYX3gdaNqjwMQ==\",\"newPassword\"\
                  :\"/hpXZngC7EPoYqiex5YphA==\"}"
              users-change-password-invalid-format:
                value: "{\"currentPassword\":\"ss9Ge153gVYX3gdaNqjwMQ==\",\"newPassword\"\
                  :\"dJwb2UTy6KwYeaWtaoKWZQ==\"}"
      responses:
        "400":
          description: "400"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/users-tsid-1331249008"
              examples:
                users-change-password-invalid-current:
                  value: "{\"code\":\"INVALID_CURRENT_PASSWORD\",\"message\":\"현재\
                    \ 비밀번호가 올바르지 않습니다.\"}"
                users-change-password-invalid-format:
                  value: "{\"code\":\"INVALID_PASSWORD_FORMAT\",\"message\":\"비밀번호\
                    는 최소 8자 이상이며, 숫자와 특수문자(!@#$%^&*)를 포함해야 합니다.\"}"
        "204":
          description: "204"
  /users/me/oauth/{provider}:
    delete:
      tags:
        - users
      operationId: "DELETE /users/me/oauth/{provider}"
      parameters:
        - name: provider
          in: path
          description: "OAuth 제공자 (GOOGLE, KAKAO 등)"
          required: true
          schema:
            type: string
      responses:
        "204":
          description: "204"
        "404":
          description: "404"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/users-tsid-1331249008"
              examples:
                DELETE /users/me/oauth/{provider} - 404:
                  value: "{\"code\":\"OAUTH_CONNECTION_NOT_FOUND\",\"message\":\"연\
                    동되지 않은 소셜 계정입니다.\"}"
        "400":
          description: "400"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/users-tsid-1331249008"
              examples:
                DELETE /users/me/oauth/{provider} - 400:
                  value: "{\"code\":\"CANNOT_UNLINK_LAST_LOGIN_METHOD\",\"message\"\
                    :\"마지막 로그인 수단입니다. 비밀번호를 설정하거나 다른 소셜 계정을 연동한 후 해제할 수 있습니다.\"}"
components:
  schemas:
    users-me-458480484:
      type: object
      properties:
        phoneNumber:
          type: string
          description: "전화번호 (null이면 변경하지 않음, 10-11자리 숫자)"
          nullable: true
        name:
          type: string
          description: 이름 (null이면 변경하지 않음)
          nullable: true
        nickname:
          type: string
          description: 닉네임 (null이면 변경하지 않음)
          nullable: true
    users-me54274076:
      required:
        - createdAt
        - email
        - hasPassword
        - name
        - status
        - tsid
      type: object
      properties:
        createdAt:
          type: string
          description: 가입일시
        connectedProviders:
          type: array
          description: 연동된 소셜 계정 목록 (GOOGLE 등)
          nullable: true
          items:
            oneOf:
              - type: object
              - type: boolean
              - type: string
              - type: number
        phoneNumber:
          type: string
          description: 전화번호
          nullable: true
        name:
          type: string
          description: 사용자 이름
        nickname:
          type: string
          description: 닉네임
          nullable: true
        hasPassword:
          type: boolean
          description: 비밀번호 설정 여부
        tsid:
          type: string
          description: 사용자 고유 ID
        profileImageUrl:
          type: string
          description: 프로필 이미지 URL
          nullable: true
        email:
          type: string
          description: 이메일 (변경 불가)
        status:
          type: string
          description: 계정 상태
    login1168052559:
      required:
        - accessToken
        - expiresIn
        - tokenType
      type: object
      properties:
        expiresIn:
          type: number
          description: 액세스 토큰 만료 시간 (초)
        tokenType:
          type: string
          description: 토큰 타입 (Bearer)
        accessToken:
          type: string
          description: 액세스 토큰 (JWT)
    refresh-542310961:
      required:
        - accessToken
        - expiresIn
        - tokenType
      type: object
      properties:
        expiresIn:
          type: number
          description: 액세스 토큰 만료 시간 (초)
        tokenType:
          type: string
          description: 토큰 타입 (Bearer)
        accessToken:
          type: string
          description: 새로운 액세스 토큰 (JWT)
    login-733236850:
      required:
        - email
        - password
      type: object
      properties:
        password:
          type: string
          description: AES 암호화된 비밀번호 (Base64 인코딩)
        email:
          type: string
          description: 이메일 주소
    users-tsid-1331249008:
      required:
        - code
        - message
      type: object
      properties:
        code:
          type: string
          description: 에러 코드
        message:
          type: string
          description: 에러 메시지
    users-join-1381348445:
      required:
        - email
        - name
        - password
        - phoneNumber
      type: object
      properties:
        password:
          type: string
          description: AES 암호화된 비밀번호 (Base64 인코딩)
        phoneNumber:
          type: string
          description: "전화번호 (숫자만 입력, 예: 01012345678)"
        name:
          type: string
          description: 사용자 이름
        nickname:
          type: string
          description: 닉네임 (선택 사항)
          nullable: true
        email:
          type: string
          description: 이메일 주소 (이메일 형식)
    refresh388130491:
      required:
        - code
        - message
      type: object
      properties:
        code:
          type: string
          description: 에러 코드 (REFRESH_TOKEN_MISSING)
        message:
          type: string
          description: 에러 메시지
    users-me-656631050:
      required:
        - createdAt
        - email
        - hasPassword
        - name
        - status
        - tsid
      type: object
      properties:
        createdAt:
          type: string
          description: 가입일시
        connectedProviders:
          type: array
          description: 연동된 소셜 계정 목록 (GOOGLE 등)
          nullable: true
          items:
            oneOf:
              - type: object
              - type: boolean
              - type: string
              - type: number
        phoneNumber:
          type: string
          description: 전화번호
          nullable: true
        name:
          type: string
          description: 사용자 이름
        nickname:
          type: string
          description: 닉네임
          nullable: true
        hasPassword:
          type: boolean
          description: 비밀번호 설정 여부
        tsid:
          type: string
          description: 사용자 고유 ID
        profileImageUrl:
          type: string
          description: 프로필 이미지 URL
          nullable: true
        email:
          type: string
          description: 이메일
        status:
          type: string
          description: 계정 상태
    users-tsid-370292314:
      required:
        - name
        - nickname
      type: object
      properties:
        name:
          type: string
          description: 사용자 이름
        nickname:
          type: string
          description: 닉네임
        profileImageUrl:
          type: string
          description: 프로필 이미지 URL
          nullable: true
    users-me192728359:
      required:
        - password
      type: object
      properties:
        password:
          type: string
          description: "비밀번호 (AES 암호화, 본인 확인용)"
    users-me-password443516385:
      required:
        - currentPassword
        - newPassword
      type: object
      properties:
        newPassword:
          type: string
          description: "새 비밀번호 (AES 암호화, 최소 8자, 숫자+특수문자 포함)"
        currentPassword:
          type: string
          description: 현재 비밀번호 (AES 암호화)
